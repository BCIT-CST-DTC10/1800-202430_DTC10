<!DOCTYPE html>
<html lang="en">

<head>
    <title>Map - GoStudy</title>
    <meta name="hidden-name" content="studious domain expansion" />
    <meta name="description"
        content="A web application to help students find and access study spots easily with user reviews and ratings from fellow students." />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous" />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>

    <!-- Firebase -->
    <script src="https://gostudy.web.app/__/firebase/11.0.1/firebase-app-compat.js"></script>
    <!-- Firebase features -->
    <script src="https://gostudy.web.app/__/firebase/11.0.1/firebase-firestore-compat.js"></script>
    <!-- Firebase initialization -->
    <script src="https://gostudy.web.app/__/firebase/init.js"></script>

    <!-- Homemade JS -->
    <script defer src="/scripts/common.js"></script>

    <script defer>
        const db = firebase.firestore();

        (async () => {
            const tags = db.collection("tags");
            try {
                const tagsData = await tags.get();
                if (tagsData.empty) {
                    throw new Error("Empty tags");
                }
            } catch (error) {
                [
                    [
                        "cafe",
                        "Cafe",
                        "location_type",
                        [
                            true,
                            false,
                        ],
                    ],
                    [
                        "school",
                        "School",
                        "location_type",
                        [
                            true,
                            false,
                        ],
                    ],
                    [
                        'wifi',
                        "Wi-Fi",
                        "feature",
                        [
                            "free",
                            "paid",
                            "none",
                        ],
                    ],
                    [
                        'charger',
                        "Charger",
                        "feature",
                        [
                            true,
                            false,
                        ],
                    ],
                ].forEach(async ([id, name, type, values]) => {
                    await tags.doc(id).set({
                        name,
                        type,
                        values,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    })
                })
            }
            const studySpots = db.collection("studySpots");
            try {
                const studySpotsData = await studySpots.get();
                if (studySpotsData.empty) {
                    throw new Error("Empty studySpots");
                }
            } catch (error) {
                [
                    [
                        'bcit',
                        "BCIT Downtown Campus",
                        {
                            cafe: {
                                status: false
                            },
                            school: {
                                status: true
                            },
                            wifi: {
                                status: "free"
                            },
                            charger: {
                                status: true
                            }
                        },
                        {
                            monday: {
                                open: "08:00:00",
                                close: "16:00:00",
                            },
                            tuesday: {
                                open: "08:00:00",
                                close: "16:00:00",
                            },
                            wednesday: {
                                open: "08:00:00",
                                close: "16:00:00",
                            },
                            thursday: {
                                open: "08:00:00",
                                close: "16:00:00",
                            },
                            friday: {
                                open: "08:00:00",
                                close: "16:00:00",
                            }
                        },
                        "555 Seymour St, Vancouver, BC V6B 3H6",
                        "https://maps.app.goo.gl/ZkmdWkmjK8Cv14GD7",
                        "This is a school for tech :)"
                    ],
                    [
                        'ubc',
                        "UBC",
                        {
                            cafe: {
                                status: false
                            },
                            school: {
                                status: true
                            },
                            wifi: {
                                status: "paid"
                            },
                            charger: {
                                status: false
                            }
                        },
                        {
                            monday: true,
                            tuesday: true,
                            wednesday: true,
                            thursday: true,
                            friday: true,
                            saturday: true,
                            sunday: true
                        },
                        "UBC, University Endowment Lands, BC",
                        "https://maps.app.goo.gl/CbsUQ6zSzHTZPL556",
                        "this is a school whose students go to BCIT anyway"
                    ],
                ].forEach(async ([id, name, tags, schedule, address, googleMapLink, description]) => {
                    await studySpots.doc(id).set({
                        name,
                        tags,
                        schedule,
                        address,
                        googleMapLink,
                        description,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
                    })
                })
            }
        })();
    </script>
</head>

<body>
    <nav class="toBeReplaced"></nav>
    <main></main>
    <footer class="toBeReplaced"></footer>
</body>

</html>
